(function(){function a(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function b(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function c(a){return"\\"+wc[a]}function d(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function e(a){return a instanceof e?a:new f(a)}function f(a,b){this.__chain__=!!b,this.__wrapped__=a}function g(a){function b(){if(e){var a=d(e);Kc.apply(a,arguments)}if(this instanceof b){var g=h(c.prototype),i=c.apply(g,a||arguments);return J(i)?i:g}return c.apply(f,a||arguments)}var c=a[0],e=a[2],f=a[4];return b}function h(a){return J(a)?Mc(a):{}}function i(a,b,c){if("function"!=typeof a)return Tb;if("undefined"==typeof b||!("prototype"in a))return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Gb(a,b)}function j(a){function b(){var a=l?i:this;if(f){var q=d(f);Kc.apply(q,arguments)}if((g||n)&&(q||(q=d(arguments)),g&&Kc.apply(q,g),n&&q.length<k))return e|=16,j([c,o?e:-4&e,q,null,i,k]);if(q||(q=arguments),m&&(c=a[p]),this instanceof b){a=h(c.prototype);var r=c.apply(a,q);return J(r)?r:a}return c.apply(a,q)}var c=a[0],e=a[1],f=a[2],g=a[3],i=a[4],k=a[5],l=1&e,m=2&e,n=4&e,o=8&e,p=c;return b}function k(a,b){for(var c=-1,d=s(),e=a?a.length:0,f=[];++c<e;){var g=a[c];d(b,g)<0&&f.push(g)}return f}function l(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(Vc(h)||v(h))){b||(h=l(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function m(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;var f=typeof a,g=typeof b;if(!(a!==a||a&&vc[f]||b&&vc[g]))return!1;if(null==a||null==b)return a===b;var h=Fc.call(a),i=Fc.call(b);if(h!=i)return!1;switch(h){case oc:case pc:return+a==+b;case rc:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case tc:case uc:return a==String(b)}var j=h==nc;if(!j){var k=a instanceof e,l=b instanceof e;if(k||l)return m(k?a.__wrapped__:a,l?b.__wrapped__:b,c,d);if(h!=sc)return!1;var n=a.constructor,o=b.constructor;if(n!=o&&!(I(n)&&n instanceof n&&I(o)&&o instanceof o)&&"constructor"in a&&"constructor"in b)return!1}c||(c=[]),d||(d=[]);for(var p=c.length;p--;)if(c[p]==a)return d[p]==b;var q=!0,r=0;if(c.push(a),d.push(b),j){if(r=b.length,q=r==a.length)for(;r--&&(q=m(a[r],b[r],c,d)););}else ad(b,function(b,e,f){return Jc.call(f,e)?(r++,!(q=Jc.call(a,e)&&m(a[e],b,c,d))&&hc):void 0}),q&&ad(a,function(a,b,c){return Jc.call(c,b)?!(q=--r>-1)&&hc:void 0});return c.pop(),d.pop(),q}function n(a,b){return a+Ic(Tc()*(b-a+1))}function o(a,b,c){for(var d=-1,e=s(),f=a?a.length:0,g=[],h=c?[]:g;++d<f;){var i=a[d],j=c?c(i,d,a):i;(b?!d||h[h.length-1]!==j:e(h,j)<0)&&(c&&h.push(j),g.push(i))}return g}function p(a){return function(b,c,d){var e={};c=Rb(c,d,3);var f=-1,g=b?b.length:0;if("number"==typeof g)for(;++f<g;){var h=b[f];a(e,h,c(h,f,b),b)}else bd(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function q(a,b,c,d,e,f){var h=2&b,i=16&b,k=32&b;if(!h&&!I(a))throw new TypeError;i&&!c.length&&(b&=-17,i=c=!1),k&&!d.length&&(b&=-33,k=d=!1);var l=1==b||17===b?g:j;return l([a,b,c,d,e,f])}function r(a){return Yc[a]}function s(){var b=(b=e.indexOf)===sb?a:b;return b}function t(a){return"function"==typeof a&&Gc.test(a)}function u(a){return Zc[a]}function v(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Fc.call(a)==mc||!1}function w(a){if(!a)return a;for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];if(d)for(var e in d)a[e]=d[e]}return a}function x(a){return J(a)?Vc(a)?d(a):w({},a):a}function y(a){if(!a)return a;for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];if(d)for(var e in d)"undefined"==typeof a[e]&&(a[e]=d[e])}return a}function z(a){var b=[];return ad(a,function(a,c){I(a)&&b.push(c)}),b.sort()}function A(a,b){return a?Jc.call(a,b):!1}function B(a){for(var b=-1,c=Xc(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function C(a){return a===!0||a===!1||a&&"object"==typeof a&&Fc.call(a)==oc||!1}function D(a){return a&&"object"==typeof a&&Fc.call(a)==pc||!1}function E(a){return a&&1===a.nodeType||!1}function F(a){if(!a)return!0;if(Vc(a)||O(a))return!a.length;for(var b in a)if(Jc.call(a,b))return!1;return!0}function G(a,b){return m(a,b)}function H(a){return Oc(a)&&!Pc(parseFloat(a))}function I(a){return"function"==typeof a}function J(a){return!(!a||!vc[typeof a])}function K(a){return M(a)&&a!=+a}function L(a){return null===a}function M(a){return"number"==typeof a||a&&"object"==typeof a&&Fc.call(a)==rc||!1}function N(a){return a&&vc[typeof a]&&Fc.call(a)==tc||!1}function O(a){return"string"==typeof a||a&&"object"==typeof a&&Fc.call(a)==uc||!1}function P(a){return"undefined"==typeof a}function Q(a){var b=[];ad(a,function(a,c){b.push(c)}),b=k(b,l(arguments,!0,!1,1));for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];e[f]=a[f]}return e}function R(a){for(var b=-1,c=Xc(a),d=c.length,e=Array(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function S(a){for(var b=-1,c=l(arguments,!0,!1,1),d=c.length,e={};++b<d;){var f=c[b];f in a&&(e[f]=a[f])}return e}function T(a){for(var b=-1,c=Xc(a),d=c.length,e=Array(d);++b<d;)e[b]=a[c[b]];return e}function U(a,b){var c=s(),d=a?a.length:0,e=!1;return d&&"number"==typeof d?e=c(a,b)>-1:bd(a,function(a){return(e=a===b)&&hc}),e}function V(a,b,c){var d=!0;b=Rb(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&(d=!!b(a[e],e,a)););else bd(a,function(a,c,e){return!(d=!!b(a,c,e))&&hc});return d}function W(a,b,c){var d=[];b=Rb(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f;){var g=a[e];b(g,e,a)&&d.push(g)}else bd(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function X(a,b,c){b=Rb(b,c,3);var d=-1,e=a?a.length:0;if("number"!=typeof e){var f;return bd(a,function(a,c,d){return b(a,c,d)?(f=a,hc):void 0}),f}for(;++d<e;){var g=a[d];if(b(g,d,a))return g}}function Y(a,b){return nb(a,b,!0)}function Z(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:i(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==hc;);else bd(a,b)}function _(a,b){var c=a?a.length:0;if("number"==typeof c)for(;c--&&b(a[c],c,a)!==!1;);else{var d=Xc(a);c=d.length,bd(a,function(a,e,f){return e=d?d[--c]:--c,b(f[e],e,f)===!1&&hc})}}function ab(a,b){var c=d(arguments,2),e=-1,f="function"==typeof b,g=a?a.length:0,h=Array("number"==typeof g?g:0);return Z(a,function(a){h[++e]=(f?b:a[b]).apply(a,c)}),h}function bb(a,b,c){var d=-1,e=a?a.length:0;if(b=Rb(b,c,3),"number"==typeof e)for(var f=Array(e);++d<e;)f[d]=b(a[d],d,a);else f=[],bd(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function cb(a,b,c){var d=-1/0,e=d;"function"!=typeof b&&c&&c[b]===a&&(b=null);var f=-1,g=a?a.length:0;if(null==b&&"number"==typeof g)for(;++f<g;){var h=a[f];h>e&&(e=h)}else b=Rb(b,c,3),Z(a,function(a,c,f){var g=b(a,c,f);g>d&&(d=g,e=a)});return e}function db(a,b,c){var d=1/0,e=d;"function"!=typeof b&&c&&c[b]===a&&(b=null);var f=-1,g=a?a.length:0;if(null==b&&"number"==typeof g)for(;++f<g;){var h=a[f];e>h&&(e=h)}else b=Rb(b,c,3),Z(a,function(a,c,f){var g=b(a,c,f);d>g&&(d=g,e=a)});return e}function eb(a,b,c,d){if(!a)return c;var e=arguments.length<3;b=Rb(b,d,4);var f=-1,g=a.length;if("number"==typeof g)for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a);else bd(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function fb(a,b,c,d){var e=arguments.length<3;return b=Rb(b,d,4),_(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function gb(a,b,c){return b=Rb(b,c,3),W(a,function(a,c,d){return!b(a,c,d)})}function hb(a,b,c){if(a&&"number"!=typeof a.length&&(a=T(a)),null==b||c)return a?a[n(0,a.length-1)]:fc;var d=ib(a);return d.length=Sc(Rc(0,b),d.length),d}function ib(a){var b=-1,c=a?a.length:0,d=Array("number"==typeof c?c:0);return Z(a,function(a){var c=n(0,++b);d[b]=d[c],d[c]=a}),d}function jb(a){var b=a?a.length:0;return"number"==typeof b?b:Xc(a).length}function kb(a,b,c){var d;b=Rb(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&!(d=b(a[e],e,a)););else bd(a,function(a,c,e){return(d=b(a,c,e))&&hc});return!!d}function lb(a,c,d){var e=-1,f=a?a.length:0,g=Array("number"==typeof f?f:0);for(c=Rb(c,d,3),Z(a,function(a,b,d){g[++e]={criteria:[c(a,b,d)],index:e,value:a}}),f=g.length,g.sort(b);f--;)g[f]=g[f].value;return g}function mb(a){return Vc(a)?d(a):a&&"number"==typeof a.length?bb(a):T(a)}function nb(a,b,c){return c&&F(b)?fc:(c?X:W)(a,b)}function ob(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function pb(a){return k(a,l(arguments,!0,!0,1))}function qb(a,b,c){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=-1;for(b=Rb(b,c,3);++g<f&&b(a[g],g,a);)e++}else if(e=b,null==e||c)return a?a[0]:fc;return d(a,0,Sc(Rc(0,e),f))}function rb(a,b){return l(a,b)}function sb(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=0>d?Rc(0,e+d):d||0}else if(d){var f=zb(b,c);return b[f]===c?f:-1}return a(b,c,d)}function tb(a,b,c){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=f;for(b=Rb(b,c,3);g--&&b(a[g],g,a);)e++}else e=null==b||c?1:b||e;return d(a,0,Sc(Rc(0,f-e),f))}function ub(){for(var a=[],b=-1,c=arguments.length;++b<c;){var d=arguments[b];(Vc(d)||v(d))&&a.push(d)}var e=a[0],f=-1,g=s(),h=e?e.length:0,i=[];a:for(;++f<h;)if(d=e[f],g(i,d)<0){for(var b=c;--b;)if(g(a[b],d)<0)continue a;i.push(d)}return i}function vb(a,b,c){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=f;for(b=Rb(b,c,3);g--&&b(a[g],g,a);)e++}else if(e=b,null==e||c)return a?a[f-1]:fc;return d(a,Rc(0,f-e))}function wb(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Rc(0,d+c):Sc(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function xb(a,b,c){a=+a||0,c=+c||1,null==b&&(b=a,a=0);for(var d=-1,e=Rc(0,Hc((b-a)/c)),f=Array(e);++d<e;)f[d]=a,a+=c;return f}function yb(a,b,c){if("number"!=typeof b&&null!=b){var e=0,f=-1,g=a?a.length:0;for(b=Rb(b,c,3);++f<g&&b(a[f],f,a);)e++}else e=null==b||c?1:Rc(0,b);return d(a,e)}function zb(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?Rb(c,d,1):Tb,b=c(b);f>e;){var g=e+f>>>1;c(a[g])<b?e=g+1:f=g}return e}function Ab(){return o(l(arguments,!0,!0))}function Bb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(c=Rb(c,d,3)),o(a,b,c)}function Cb(a){return k(a,d(arguments,1))}function Db(){for(var a=-1,b=cb(fd(arguments,"length")),c=Array(0>b?0:b);++a<b;)c[a]=fd(arguments,a);return c}function Eb(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Vc(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Fb(a,b){if(!I(b))throw new TypeError;return function(){return--a<1?b.apply(this,arguments):void 0}}function Gb(a,b){return arguments.length>2?q(a,17,d(arguments,2),null,b):q(a,1,null,null,b)}function Hb(a){for(var b=arguments.length>1?l(arguments,!0,!1,1):z(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=q(a[e],1,null,null,a)}return a}function Ib(){for(var a=arguments,b=a.length;b--;)if(!I(a[b]))throw new TypeError;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Jb(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!I(a))throw new TypeError;if(b=Rc(0,b)||0,c===!0){var n=!0;m=!1}else J(c)&&(n=c.leading,l="maxWait"in c&&(Rc(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(gd()-g);if(0>=c){e&&clearTimeout(e);var l=j;e=i=j=fc,l&&(k=gd(),f=a.apply(h,d),i||e||(d=h=null))}else i=setTimeout(o,c)},p=function(){i&&clearTimeout(i),e=i=j=fc,(m||l!==b)&&(k=gd(),f=a.apply(h,d),i||e||(d=h=null))};return function(){if(d=arguments,g=gd(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var q=l-(g-k),r=0>=q;r?(e&&(e=clearTimeout(e)),k=g,f=a.apply(h,d)):e||(e=setTimeout(p,q))}return r&&i?i=clearTimeout(i):i||b===l||(i=setTimeout(o,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Kb(a){if(!I(a))throw new TypeError;var b=d(arguments,1);return setTimeout(function(){a.apply(fc,b)},1)}function Lb(a,b){if(!I(a))throw new TypeError;var c=d(arguments,2);return setTimeout(function(){a.apply(fc,c)},b)}function Mb(a,b){var c={};return function(){var d=b?b.apply(this,arguments):ic+arguments[0];return Jc.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}}function Nb(a){var b,c;if(!I(a))throw new TypeError;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Ob(a){return q(a,16,d(arguments,1))}function Pb(a,b,c){var d=!0,e=!0;if(!I(a))throw new TypeError;return c===!1?d=!1:J(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),c={},c.leading=d,c.maxWait=b,c.trailing=e,Jb(a,b,c)}function Qb(a,b){return q(b,16,[a])}function Rb(a,b,c){var d=typeof a;if(null==a||"function"==d)return i(a,b,c);if("object"!=d)return Wb(a);var e=Xc(a);return function(b){for(var c=e.length,d=!1;c--&&(d=b[e[c]]===a[e[c]]););return d}}function Sb(a){return null==a?"":String(a).replace(_c,r)}function Tb(a){return a}function Ub(a){Z(z(a),function(b){var c=e[b]=a[b];e.prototype[b]=function(){var a=[this.__wrapped__];Kc.apply(a,arguments);var b=c.apply(e,a);return this.__chain__?new f(b,!0):b}})}function Vb(){return xc._=Ec,this}function Wb(a){return function(b){return b[a]}}function Xb(a,b){return null==a&&null==b&&(b=1),a=+a||0,null==b?(b=a,a=0):b=+b||0,a+Ic(Tc()*(b-a+1))}function Yb(a,b){if(a){var c=a[b];return I(c)?a[b]():c}}function Zb(a,b,d){var f=e,g=f.templateSettings;a=String(a||""),d=y({},d,g);var h=0,i="__p += '",j=d.variable,k=RegExp((d.escape||kc).source+"|"+(d.interpolate||kc).source+"|"+(d.evaluate||kc).source+"|$","g");a.replace(k,function(b,d,e,f,g){return i+=a.slice(h,g).replace(lc,c),d&&(i+="' +\n_.escape("+d+") +\n'"),f&&(i+="';\n"+f+";\n__p += '"),e&&(i+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),h=g+b.length,b}),i+="';\n",j||(j="obj",i="with ("+j+" || {}) {\n"+i+"\n}\n"),i="function("+j+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+i+"return __p\n}";try{var l=Function("_","return "+i)(f)}catch(m){throw m.source=i,m}return b?l(b):(l.source=i,l)}function $b(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=Array(a);for(b=i(b,c,1);++d<a;)e[d]=b(d);return e}function _b(a){return null==a?"":String(a).replace($c,u)}function ac(a){var b=++gc+"";return a?a+b:b}function bc(a){return a=new f(a),a.__chain__=!0,a}function cc(a,b){return b(a),a}function dc(){return this.__chain__=!0,this}function ec(){return this.__wrapped__}var fc,gc=0,hc={},ic=+new Date+"",jc=/<%=([\s\S]+?)%>/g,kc=/($^)/,lc=/['\n\r\t\u2028\u2029\\]/g,mc="[object Arguments]",nc="[object Array]",oc="[object Boolean]",pc="[object Date]",qc="[object Function]",rc="[object Number]",sc="[object Object]",tc="[object RegExp]",uc="[object String]",vc={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},wc={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},xc=vc[typeof window]&&window||this,yc=vc[typeof exports]&&exports&&!exports.nodeType&&exports,zc=vc[typeof module]&&module&&!module.nodeType&&module,Ac=zc&&zc.exports===yc&&yc,Bc=vc[typeof global]&&global;!Bc||Bc.global!==Bc&&Bc.window!==Bc||(xc=Bc);var Cc=[],Dc=Object.prototype,Ec=xc._,Fc=Dc.toString,Gc=RegExp("^"+String(Fc).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Hc=Math.ceil,Ic=Math.floor,Jc=Dc.hasOwnProperty,Kc=Cc.push,Lc=Dc.propertyIsEnumerable,Mc=t(Mc=Object.create)&&Mc,Nc=t(Nc=Array.isArray)&&Nc,Oc=xc.isFinite,Pc=xc.isNaN,Qc=t(Qc=Object.keys)&&Qc,Rc=Math.max,Sc=Math.min,Tc=Math.random;f.prototype=e.prototype;var Uc={};!function(){var a={0:1,length:1};Uc.spliceObjects=(Cc.splice.call(a,0,1),!a[0])}(1),e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:jc,variable:""},Mc||(h=function(){function a(){}return function(b){if(J(b)){a.prototype=b;var c=new a;a.prototype=null}return c||xc.Object()}}()),v(arguments)||(v=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Jc.call(a,"callee")&&!Lc.call(a,"callee")||!1});var Vc=Nc||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Fc.call(a)==nc||!1},Wc=function(a){var b,c=a,d=[];if(!c)return d;if(!vc[typeof a])return d;for(b in c)Jc.call(c,b)&&d.push(b);return d},Xc=Qc?function(a){return J(a)?Qc(a):[]}:Wc,Yc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Zc=B(Yc),$c=RegExp("("+Xc(Zc).join("|")+")","g"),_c=RegExp("["+Xc(Yc).join("")+"]","g"),ad=function(a,b){var c,d=a,e=d;if(!d)return e;if(!vc[typeof d])return e;for(c in d)if(b(d[c],c,a)===hc)return e;return e},bd=function(a,b){var c,d=a,e=d;if(!d)return e;if(!vc[typeof d])return e;for(c in d)if(Jc.call(d,c)&&b(d[c],c,a)===hc)return e;return e};I(/x/)&&(I=function(a){return"function"==typeof a&&Fc.call(a)==qc});var cd=p(function(a,b,c){Jc.call(a,c)?a[c]++:a[c]=1}),dd=p(function(a,b,c){(Jc.call(a,c)?a[c]:a[c]=[]).push(b)}),ed=p(function(a,b,c){a[c]=b}),fd=bb,gd=t(gd=Date.now)&&gd||function(){return(new Date).getTime()};e.after=Fb,e.bind=Gb,e.bindAll=Hb,e.chain=bc,e.compact=ob,e.compose=Ib,e.countBy=cd,e.debounce=Jb,e.defaults=y,e.defer=Kb,e.delay=Lb,e.difference=pb,e.filter=W,e.flatten=rb,e.forEach=Z,e.functions=z,e.groupBy=dd,e.indexBy=ed,e.initial=tb,e.intersection=ub,e.invert=B,e.invoke=ab,e.keys=Xc,e.map=bb,e.max=cb,e.memoize=Mb,e.min=db,e.omit=Q,e.once=Nb,e.pairs=R,e.partial=Ob,e.pick=S,e.pluck=fd,e.range=xb,e.reject=gb,e.rest=yb,e.shuffle=ib,e.sortBy=lb,e.tap=cc,e.throttle=Pb,e.times=$b,e.toArray=mb,e.union=Ab,e.uniq=Bb,e.values=T,e.where=nb,e.without=Cb,e.wrap=Qb,e.zip=Db,e.collect=bb,e.drop=yb,e.each=Z,e.extend=w,e.methods=z,e.object=Eb,e.select=W,e.tail=yb,e.unique=Bb,e.clone=x,e.contains=U,e.escape=Sb,e.every=V,e.find=X,e.has=A,e.identity=Tb,e.indexOf=sb,e.isArguments=v,e.isArray=Vc,e.isBoolean=C,e.isDate=D,e.isElement=E,e.isEmpty=F,e.isEqual=G,e.isFinite=H,e.isFunction=I,e.isNaN=K,e.isNull=L,e.isNumber=M,e.isObject=J,e.isRegExp=N,e.isString=O,e.isUndefined=P,e.lastIndexOf=wb,e.mixin=Ub,e.noConflict=Vb,e.random=Xb,e.reduce=eb,e.reduceRight=fb,e.result=Yb,e.size=jb,e.some=kb,e.sortedIndex=zb,e.template=Zb,e.unescape=_b,e.uniqueId=ac,e.all=V,e.any=kb,e.detect=X,e.findWhere=Y,e.foldl=eb,e.foldr=fb,e.include=U,e.inject=eb,e.first=qb,e.last=vb,e.sample=hb,e.take=qb,e.head=qb,Ub(e),e.VERSION="2.4.1",e.prototype.chain=dc,e.prototype.value=ec,Z(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=Cc[a];e.prototype[a]=function(){var a=this.__wrapped__;return b.apply(a,arguments),Uc.spliceObjects||0!==a.length||delete a[0],this}}),Z(["concat","join","slice"],function(a){var b=Cc[a];e.prototype[a]=function(){var a=this.__wrapped__,c=b.apply(a,arguments);return this.__chain__&&(c=new f(c),c.__chain__=!0),c}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(xc._=e,define(function(){return e})):yc&&zc?Ac?(zc.exports=e)._=e:yc._=e:xc._=e}).call(this),function(a,b){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,$,d){a.Backbone=b(a,d,c,$)});else if("undefined"!=typeof exports){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,$){{var d=a.Backbone,e=[],f=(e.push,e.slice);e.splice}b.VERSION="1.1.2",b.$=$,b.noConflict=function(){return a.Backbone=d,this},b.emulateHTTP=!1,b.emulateJSON=!1;var g=b.Events={on:function(a,b,c){if(!i(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!i(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,j,k,l,m;if(!this._events||!i(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),j=0,k=h.length;k>j;j++)if(a=h[j],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;m>l;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=f.call(arguments,1);if(!i(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&j(c,b),d&&j(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},h=/\s+/,i=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(h.test(c)){for(var f=c.split(h),g=0,i=f.length;i>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},j=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},k={listenTo:"on",listenToOnce:"once"};c.each(k,function(a,b){g[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),g.bind=g.on,g.unbind=g.off,c.extend(b,g);var l=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(l.prototype,g,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),void b.trigger("sync",b,c,a)):!1},K(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},K(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;K(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||J();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];c.each(m,function(a){l.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var n=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},o={add:!0,remove:!0,merge:!0},p={add:!0,remove:!1};c.extend(n.prototype,g,{model:l,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,p))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,o),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,m=b.at,n=this.model,p=this.comparator&&null==m&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!p&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e]||{},g=i instanceof l?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),p&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(p&&(k=!0),this.length+=r.length,null!=m)for(e=0,f=r.length;f>e;e++)this.models.splice(m+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return f.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},K(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof l)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var q=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(q,function(a){n.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var r=["groupBy","countBy","sortBy","indexBy"];c.each(r,function(a){n.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var s=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,u)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},t=/^(\S+)\s*(.*)$/,u=["model","collection","el","id","attributes","className","tagName","events"];c.extend(s.prototype,g,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(t),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));
var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=w[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||J()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&v&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var v=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),w={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var x=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},y=/\((.*?)\)/g,z=/(\(\?)?:\w+/g,A=/\*\w+/g,B=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(x.prototype,g,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(B,"\\$&").replace(y,"(?:$1)?").replace(z,function(a,b){return b?a:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var C=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,E=/^\/+|\/+$/g,F=/msie [\w.]+/,G=/\/$/,H=/#.*$/;C.started=!1,c.extend(C.prototype,g,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(G,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(D,"")},start:function(a){if(C.started)throw new Error("Backbone.history has already been started");C.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=F.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);if(this.root=("/"+this.root+"/").replace(E,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),C.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})},navigate:function(a,b){if(!C.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(H,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new C;var I=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};l.extend=n.extend=x.extend=s.extend=C.extend=I;var J=function(){throw new Error('A "url" property or function must be specified')},K=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),function(a){function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(a,b){return function(c){return k(a.call(this,c),b)}}function d(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function e(){}function f(a){w(a),h(this,a)}function g(a){var b=q(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._milliseconds=+j+1e3*i+6e4*h+36e5*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble()}function h(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function i(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&rb.hasOwnProperty(b)&&(c[b]=a[b]);return c}function j(a){return 0>a?Math.ceil(a):Math.floor(a)}function k(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function l(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&eb.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function m(a){return"[object Array]"===Object.prototype.toString.call(a)}function n(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function o(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&s(a[d])!==s(b[d]))&&g++;return g+f}function p(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Ub[a]||Vb[b]||b}return a}function q(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=p(c),b&&(d[b]=a[c]));return d}function r(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}eb[b]=function(e,f){var g,h,i=eb.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=eb().utc().set(d,a);return i.call(eb.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function s(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function t(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function u(a){return v(a)?366:365}function v(a){return a%4===0&&a%100!==0||a%400===0}function w(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[kb]<0||a._a[kb]>11?kb:a._a[lb]<1||a._a[lb]>t(a._a[jb],a._a[kb])?lb:a._a[mb]<0||a._a[mb]>23?mb:a._a[nb]<0||a._a[nb]>59?nb:a._a[ob]<0||a._a[ob]>59?ob:a._a[pb]<0||a._a[pb]>999?pb:-1,a._pf._overflowDayOfYear&&(jb>b||b>lb)&&(b=lb),a._pf.overflow=b)}function x(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function y(a){return a?a.toLowerCase().replace("_","-"):a}function z(a,b){return b._isUTC?eb(a).zone(b._offset||0):eb(a).local()}function A(a,b){return b.abbr=a,qb[a]||(qb[a]=new e),qb[a].set(b),qb[a]}function B(a){delete qb[a]}function C(a){var b,c,d,e,f=0,g=function(a){if(!qb[a]&&sb)try{require("./lang/"+a)}catch(b){}return qb[a]};if(!a)return eb.fn._lang;if(!m(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=y(a[f]).split("-"),b=e.length,d=y(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&o(e,d,!0)>=b-1)break;b--}f++}return eb.fn._lang}function D(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function E(a){var b,c,d=a.match(wb);for(b=0,c=d.length;c>b;b++)d[b]=Zb[d[b]]?Zb[d[b]]:D(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function F(a,b){return a.isValid()?(b=G(b,a.lang()),Wb[b]||(Wb[b]=E(b)),Wb[b](a)):a.lang().invalidDate()}function G(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(xb.lastIndex=0;d>=0&&xb.test(a);)a=a.replace(xb,c),xb.lastIndex=0,d-=1;return a}function H(a,b){var c,d=b._strict;switch(a){case"DDDD":return Jb;case"YYYY":case"GGGG":case"gggg":return d?Kb:Ab;case"Y":case"G":case"g":return Mb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Lb:Bb;case"S":if(d)return Hb;case"SS":if(d)return Ib;case"SSS":if(d)return Jb;case"DDD":return zb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Db;case"a":case"A":return C(b._l)._meridiemParse;case"X":return Gb;case"Z":case"ZZ":return Eb;case"T":return Fb;case"SSSS":return Cb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Ib:yb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return yb;default:return c=new RegExp(P(O(a.replace("\\","")),"i"))}}function I(a){a=a||"";var b=a.match(Eb)||[],c=b[b.length-1]||[],d=(c+"").match(Rb)||["-",0,0],e=+(60*d[1])+s(d[2]);return"+"===d[0]?-e:e}function J(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[kb]=s(b)-1);break;case"MMM":case"MMMM":d=C(c._l).monthsParse(b),null!=d?e[kb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[lb]=s(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=s(b));break;case"YY":e[jb]=s(b)+(s(b)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":e[jb]=s(b);break;case"a":case"A":c._isPm=C(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[mb]=s(b);break;case"m":case"mm":e[nb]=s(b);break;case"s":case"ss":e[ob]=s(b);break;case"S":case"SS":case"SSS":case"SSSS":e[pb]=s(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=I(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function K(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=M(a),a._w&&null==a._a[lb]&&null==a._a[kb]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[jb]?eb().weekYear():a._a[jb]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=Z(f(g.GG),g.W||1,g.E,4,1):(i=C(a._l),j=null!=g.d?V(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=Z(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[jb]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[jb]?d[jb]:a._a[jb],a._dayOfYear>u(e)&&(a._pf._overflowDayOfYear=!0),c=U(e,0,a._dayOfYear),a._a[kb]=c.getUTCMonth(),a._a[lb]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[mb]+=s((a._tzm||0)/60),l[nb]+=s((a._tzm||0)%60),a._d=(a._useUTC?U:T).apply(null,l)}}function L(a){var b;a._d||(b=q(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],K(a))}function M(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function N(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=C(a._l),h=""+a._i,i=h.length,j=0;for(d=G(a._f,g).match(wb)||[],b=0;b<d.length;b++)e=d[b],c=(h.match(H(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),Zb[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),J(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[mb]<12&&(a._a[mb]+=12),a._isPm===!1&&12===a._a[mb]&&(a._a[mb]=0),K(a),w(a)}function O(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function P(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a){var c,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,c=h({},a),c._pf=b(),c._f=a._f[f],N(c),x(c)&&(g+=c._pf.charsLeftOver,g+=10*c._pf.unusedTokens.length,c._pf.score=g,(null==e||e>g)&&(e=g,d=c));h(a,d||c)}function R(a){var b,c,d=a._i,e=Nb.exec(d);if(e){for(a._pf.iso=!0,b=0,c=Pb.length;c>b;b++)if(Pb[b][1].exec(d)){a._f=Pb[b][0]+(e[6]||" ");break}for(b=0,c=Qb.length;c>b;b++)if(Qb[b][1].exec(d)){a._f+=Qb[b][0];break}d.match(Eb)&&(a._f+="Z"),N(a)}else a._d=new Date(d)}function S(b){var c=b._i,d=tb.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?R(b):m(c)?(b._a=c.slice(0),K(b)):n(c)?b._d=new Date(+c):"object"==typeof c?L(b):b._d=new Date(c)}function T(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function U(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function V(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function W(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function X(a,b,c){var d=ib(Math.abs(a)/1e3),e=ib(d/60),f=ib(e/60),g=ib(f/24),h=ib(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",ib(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,W.apply({},i)}function Y(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=eb(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function Z(a,b,c,d,e){var f,g,h=U(a,0,1).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:u(a-1)+g}}function _(a){var b=a._i,c=a._f;return null===b?eb.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=C().preparse(b)),eb.isMoment(b)?(a=i(b),a._d=new Date(+b._d)):c?m(c)?Q(a):N(a):S(a),new f(a))}function ab(a,b){eb.fn[a]=eb.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),eb.updateOffset(this),this):this._d["get"+c+b]()}}function bb(a){eb.duration.fn[a]=function(){return this._data[a]}}function cb(a,b){eb.duration.fn["as"+a]=function(){return+this/b}}function db(a){var b=!1,c=eb;"undefined"==typeof ender&&(a?(hb.moment=function(){return!b&&console&&console.warn&&(b=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),c.apply(null,arguments)},h(hb.moment,c)):hb.moment=eb)}for(var eb,fb,gb="2.5.1",hb=this,ib=Math.round,jb=0,kb=1,lb=2,mb=3,nb=4,ob=5,pb=6,qb={},rb={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},sb="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,tb=/^\/?Date\((\-?\d+)/i,ub=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,vb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,wb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,xb=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,yb=/\d\d?/,zb=/\d{1,3}/,Ab=/\d{1,4}/,Bb=/[+\-]?\d{1,6}/,Cb=/\d+/,Db=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Eb=/Z|[\+\-]\d\d:?\d\d/gi,Fb=/T/i,Gb=/[\+\-]?\d+(\.\d{1,3})?/,Hb=/\d/,Ib=/\d\d/,Jb=/\d{3}/,Kb=/\d{4}/,Lb=/[+-]?\d{6}/,Mb=/[+-]?\d+/,Nb=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ob="YYYY-MM-DDTHH:mm:ssZ",Pb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Qb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Rb=/([\+\-]|\d\d)/gi,Sb="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Tb={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ub={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Vb={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Wb={},Xb="DDD w W M D d".split(" "),Yb="M D H h m s w W".split(" "),Zb={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+k(Math.abs(a),6)},gg:function(){return k(this.weekYear()%100,2)},gggg:function(){return k(this.weekYear(),4)},ggggg:function(){return k(this.weekYear(),5)},GG:function(){return k(this.isoWeekYear()%100,2)},GGGG:function(){return k(this.isoWeekYear(),4)},GGGGG:function(){return k(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return s(this.milliseconds()/100)},SS:function(){return k(s(this.milliseconds()/10),2)},SSS:function(){return k(this.milliseconds(),3)},SSSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+":"+k(s(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+k(s(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},$b=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Xb.length;)fb=Xb.pop(),Zb[fb+"o"]=d(Zb[fb],fb);for(;Yb.length;)fb=Yb.pop(),Zb[fb+fb]=c(Zb[fb],2);for(Zb.DDDD=c(Zb.DDD,3),h(e.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=eb.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=eb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return Y(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),eb=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=c,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=b(),_(g)},eb.utc=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=c,g._f=d,g._strict=f,g._pf=b(),_(g).utc()},eb.unix=function(a){return eb(1e3*a)},eb.duration=function(a,b){var c,d,e,f=a,h=null;return eb.isDuration(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(h=ub.exec(a))?(c="-"===h[1]?-1:1,f={y:0,d:s(h[lb])*c,h:s(h[mb])*c,m:s(h[nb])*c,s:s(h[ob])*c,ms:s(h[pb])*c}):(h=vb.exec(a))&&(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},f={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}),d=new g(f),eb.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},eb.version=gb,eb.defaultFormat=Ob,eb.updateOffset=function(){},eb.lang=function(a,b){var c;return a?(b?A(y(a),b):null===b?(B(a),a="en"):qb[a]||C(a),c=eb.duration.fn._lang=eb.fn._lang=C(a),c._abbr):eb.fn._lang._abbr},eb.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),C(a)},eb.isMoment=function(a){return a instanceof f||null!=a&&a.hasOwnProperty("_isAMomentObject")},eb.isDuration=function(a){return a instanceof g},fb=$b.length-1;fb>=0;--fb)r($b[fb]);for(eb.normalizeUnits=function(a){return p(a)},eb.invalid=function(a){var b=eb.utc(0/0);return null!=a?h(b._pf,a):b._pf.userInvalidated=!0,b},eb.parseZone=function(a){return eb(a).parseZone()},h(eb.fn=f.prototype,{clone:function(){return eb(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=eb(this).utc();return 0<a.year()&&a.year()<=9999?F(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&o(this._a,(this._isUTC?eb.utc(this._a):eb(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=F(this,a||eb.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?eb.duration(+b,a):eb.duration(a,b),l(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?eb.duration(+b,a):eb.duration(a,b),l(this,c,-1),this},diff:function(a,b,c){var d,e,f=z(a,this),g=6e4*(this.zone()-f.zone());return b=p(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-eb(this).startOf("month")-(f-eb(f).startOf("month")))/d,e-=6e4*(this.zone()-eb(this).startOf("month").zone()-(f.zone()-eb(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:j(e)},from:function(a,b){return eb.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(eb(),a)},calendar:function(){var a=z(eb(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return v(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=V(a,this.lang()),this.add({d:a-b})):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),eb.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=p(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=p(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+eb(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+eb(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+z(a,this).startOf(b)},min:function(a){return a=eb.apply(null,arguments),this>a?this:a},max:function(a){return a=eb.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=I(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&l(this,eb.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?eb(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return t(this.year(),this.month())},dayOfYear:function(a){var b=ib((eb(this).startOf("day")-eb(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(a){var b=Y(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=Y(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=Y(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=p(a),this[a]()},set:function(a,b){return a=p(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=C(b),this)}}),fb=0;fb<Sb.length;fb++)ab(Sb[fb].toLowerCase().replace(/s$/,""),Sb[fb]);ab("year","FullYear"),eb.fn.days=eb.fn.day,eb.fn.months=eb.fn.month,eb.fn.weeks=eb.fn.week,eb.fn.isoWeeks=eb.fn.isoWeek,eb.fn.toJSON=eb.fn.toISOString,h(eb.duration.fn=g.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,h=this._data;h.milliseconds=e%1e3,a=j(e/1e3),h.seconds=a%60,b=j(a/60),h.minutes=b%60,c=j(b/60),h.hours=c%24,f+=j(c/24),h.days=f%30,g+=j(f/30),h.months=g%12,d=j(g/12),h.years=d},weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*s(this._months/12)},humanize:function(a){var b=+this,c=X(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=eb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=eb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=p(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=p(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:eb.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(fb in Tb)Tb.hasOwnProperty(fb)&&(cb(fb,Tb[fb]),bb(fb.toLowerCase()));cb("Weeks",6048e5),eb.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},eb.lang("en",{ordinal:function(a){var b=a%10,c=1===s(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),sb?(module.exports=eb,db(!0)):"function"==typeof define&&define.amd?define("moment",function(b,c,d){return d.config&&d.config()&&d.config().noGlobal!==!0&&db(d.config().noGlobal===a),eb
}):db()}.call(this),this.JST=this.JST||{},this.JST["_templates/radio-item.jst"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<input type="radio" name="'+__e(fieldName)+'" value="'+__e(_id)+'" id="radio-'+__e(cid)+'">\n'+__e(name);return __p},this.JST["_templates/request.jst"]=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<td><time datetime="'+__e(created)+'">'+__e(asapp.date(created))+"</time></td><td>"+__e(location.name)+"</td><td>"+__e(user.username)+"</td><td>"+__e(type.name)+"</td><td>"+__e(description)+"</td><td>"+__e(status.name)+"</td>";return __p};var Location=Backbone.Model.extend({idAttribute:"_id"}),Request=Backbone.Model.extend({idAttribute:"_id",url:"/request",defaults:{user:{username:null},created:new Date,description:null,type:{name:null},location:{name:null}}}),Role=Backbone.Model.extend({idAttribute:"_id"}),Status=Backbone.Model.extend({idAttribute:"_id"}),Type=Backbone.Model.extend({idAttribute:"_id"}),User=Backbone.Model.extend({urlRoot:"user",idAttribute:"_id",fetched:!1,initialize:function(){this.once("sync",function(){this.fetched=!0},this),this.on("error",function(){this.fetched=!0,asapp.redirect("#login")})},validate:function(a){return a.username&&a.username.trim().length<3?"invalid username":void 0},isFetched:function(){return this.fetched}}),Locations=Backbone.Collection.extend({model:Location,url:"/locations"}),Requests=Backbone.Collection.extend({model:Request,url:"/requests",comparator:function(a){var b=new Date(a.get("created"));return-b.getTime()}}),Roles=Backbone.Collection.extend({model:Role,initialize:function(){this.add([{id:1,name:"Room Manager"},{id:2,name:"AV"}])}}),Statuses=Backbone.Collection.extend({model:Status,url:"/statuses"}),Types=Backbone.Collection.extend({model:Type,url:"/types"}),HelpView=Backbone.View.extend({el:"#help",events:{"change input":"modelSet","change select":"modelSet","change textarea":"modelSet","click button":"modelSet","submit form":"submit"},initialize:function(){this.listenTo(asapp.types,"sync",this.render),this.listenTo(asapp.locations,"sync",this.render)},render:function(){var a=this;return this.$("#request-types .ui-controlgroup-controls").empty(),asapp.types.each(function(b){var c=new TypeView({model:b}).render();a.$("#request-types .ui-controlgroup-controls").append(c.el)}),this.$("#request-types .ui-controlgroup-controls").enhanceWithin(),this.$("#request-locations .ui-controlgroup-controls").empty(),asapp.locations.each(function(b){var c=new LocationView({model:b}).render();a.$("#request-locations .ui-controlgroup-controls").append(c.el)}),this.$("#request-locations .ui-controlgroup-controls").enhanceWithin(),this},modelSet:function(a){var b=$(a.currentTarget),c={};c[b.attr("name")]=b.val(),this.model.set(c)},submit:function(a){a.preventDefault(),this.model.save(),this.collection.add(this.model),asapp.redirect("#monitor"),this.$("form")[0].reset()}}),LocationView=Backbone.View.extend({tagName:"label",template:JST["_templates/radio-item.jst"],attributes:function(){return{"for":"radio-"+this.model.cid}},render:function(){var a=this.model.attributes;return a.cid=this.model.cid,a.fieldName="location",this.$el.html(this.template(a)),this}}),LoginView=Backbone.View.extend({el:"#login",events:{"submit form":"submit","input #username":"clearErr"},initialize:function(){this.listenTo(this.model,"invalid",this.render),this.listenTo(this.model,"change",function(){this.model.isValid()&&asapp.redirect("#help")})},render:function(){return this.model.validationError&&this.$(".errormsg").text(this.model.validationError),this},clearErr:function(){this.$(".errormsg").empty()},submit:function(a){a.preventDefault(),asapp.user.save({username:this.$("#username").val()})}}),MonitorView=Backbone.View.extend({el:"#monitor",initialize:function(){this.listenTo(this.collection,"sync",this.render)},render:function(){var a=this.$("tbody");return a.empty(),this.collection.each(function(b){var c=new RequestView({model:b}).render();a.append(c.el)}),this.$el.enhanceWithin(),this}}),RequestView=Backbone.View.extend({tagName:"tr",template:JST["_templates/request.jst"],initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.template(this.model.attributes)),this}}),SettingsView=Backbone.View.extend({el:"#settings"}),TypeView=Backbone.View.extend({tagName:"label",template:JST["_templates/radio-item.jst"],attributes:function(){return{"for":"radio-"+this.model.cid}},render:function(){var a=this.model.attributes;return a.cid=this.model.cid,a.fieldName="status",this.$el.html(this.template(a)),this}}),TypeView=Backbone.View.extend({tagName:"label",template:JST["_templates/radio-item.jst"],attributes:function(){return{"for":"radio-"+this.model.cid}},render:function(){var a=this.model.attributes;return a.cid=this.model.cid,a.fieldName="type",this.$el.html(this.template(a)),this}});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),jQuery(document).on("mobileinit",function(){console.log("JQM ready"),$.extend($.mobile,{defaultPageTransition:"none"}),$.mobile.page.prototype.options.theme="b",$.mobile.page.prototype.options.domCache=!0,$(document).on("pagecontainerbeforeshow",function(a){asapp.user.isFetched()&&!asapp.user.id&&"login"!==asapp.getCurrentPage()&&(a.preventDefault(),asapp.redirect("#login"))})});var asapp={getCurrentPage:function(){var a=$(":mobile-pagecontainer").pagecontainer("getActivePage");return $(a).attr("id")},redirect:function(a){$(":mobile-pagecontainer").pagecontainer("change",a)},preload:function(){asapp.types.fetch(),asapp.locations.fetch(),asapp.statuses.fetch(),asapp.requests.fetch()},date:function(a){return moment(a).format("h:mm")}};jQuery(function($){console.log("DOM ready"),$(document).on({ajaxStart:function(){$.mobile.loading("show")},ajaxComplete:function(){$.mobile.loading("hide")}}),$('header[data-role="header"], footer[data-role="footer"]').toolbar({theme:"b"}),$('nav[data-role="navbar"]').navbar(),Backbone.$=$,asapp.user=new User,asapp.types=new Types,asapp.locations=new Locations,asapp.statuses=new Statuses,asapp.requests=new Requests,asapp.router=new Router,asapp.views={},asapp.user.on("sync",asapp.preload),asapp.user.fetch(),Backbone.history.start({pushState:!1});var a=new Pusher("89dd0fd43699d54bb1bf"),b=a.subscribe("requests");b.bind("add",function(){asapp.requests.fetch()})});var Router=Backbone.Router.extend({routes:{"":"redirect",login:"login",help:"help",monitor:"monitor",settings:"settings"},initialize:function(){this.on("route",function(a){$("nav ul li a").removeClass("ui-btn-active"),$(".nav-"+a).addClass("ui-btn-active")})},redirect:function(){asapp.redirect("#help")},login:function(){asapp.views.login&&asapp.views.login.stopListening(),asapp.views.login=new LoginView({model:asapp.user}),asapp.views.login.render()},help:function(){asapp.views.help&&asapp.views.help.stopListening(),asapp.views.help=new HelpView({collection:asapp.requests,model:new asapp.requests.model}),asapp.views.help.render()},monitor:function(){asapp.views.monitor&&asapp.views.monitor.stopListening(),asapp.views.monitor=new MonitorView({collection:asapp.requests}),asapp.views.monitor.render()},settings:function(){asapp.views.settings&&asapp.views.settings.stopListening(),asapp.views.settings=new SettingsView,asapp.views.settings.render()}});